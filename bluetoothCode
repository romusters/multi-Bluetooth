#include <SoftwareSerial.h>
int rxPin = 11;
int txPin = 10;
SoftwareSerial bSerial(txPin, rxPin);  //RX | TX
int voltPin = 8;
int keyPin = 9;

void setup() {
 Serial.begin(38400);
 bSerial.begin(38400);
 pinMode(8, OUTPUT);
 pinMode(9, OUTPUT);
 digitalWrite(voltPin, LOW);
 delay(100);
 digitalWrite(keyPin, HIGH);
 delay(100);
 digitalWrite(voltPin, HIGH);
 delay(1000);
  // put your setup code here, to run once:

}
String bStr;
String str;
char buf[128];

void loop() {
  //Send something to th
  if(bSerial.available() > 0){  
    //Serial.print("Bluetooth output is available");
    while (bSerial.available() > 0) {
      bStr += char(bSerial.read());
    }
    bStr.trim();
    Serial.println(bStr);
    bStr = "";
  }
  delay(10);
  bSerial.write("AT");
//  if(Serial.available() > 0){  
//   while (Serial.available () > 0) {
//      str += char(Serial.read());
//    }
//    //str.trim();
//    str.toCharArray(buf, 128);
//    Serial.print(buf);
//    bSerial.write(buf);
//    memset(buf, 0, 128);
//    Serial.print(buf);
//    str = "";
//  }
  delay(10);
}
